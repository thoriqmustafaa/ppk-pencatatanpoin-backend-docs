{"openapi":"3.0.1","info":{"title":"Pencatatan Poin Pelanggaran API","description":"API Documentation untuk Sistem Pencatatan Poin Pelanggaran Mahasiswa","license":{"name":"Apache 2.0","url":"http://springdoc.org"},"version":"v1.0"},"servers":[{"url":"http://localhost:8080","description":"Generated server url"}],"security":[{"bearerAuth":[]}],"tags":[{"name":"Poin","description":"API Endpoints untuk manajemen poin mahasiswa"},{"name":"Kategori Pelanggaran","description":"API Endpoints untuk manajemen kategori pelanggaran"},{"name":"User Management","description":"API Endpoints untuk manajemen user"}],"paths":{"/kategori/{id}":{"put":{"tags":["Kategori Pelanggaran"],"summary":"Mengupdate kategori pelanggaran","operationId":"updateKategori","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/KategoriRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"object"}}}}}},"delete":{"tags":["Kategori Pelanggaran"],"summary":"Menghapus kategori pelanggaran","operationId":"deleteKategori","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"object"}}}}}}},"/poins/":{"get":{"tags":["Poin"],"summary":"Mendapatkan semua data poin","description":"Endpoint untuk mendapatkan daftar semua poin pelanggaran (untuk SPD dan Mahasiswa)","operationId":"getAllPoins","responses":{"403":{"description":"Tidak memiliki akses"},"401":{"description":"Tidak terautentikasi"},"200":{"description":"Daftar poin berhasil diambil","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PoinResponse"}}}}},"security":[{"bearerAuth":[]}]},"post":{"tags":["Poin"],"summary":"Menambah poin pelanggaran","description":"Endpoint untuk menambahkan poin pelanggaran ke mahasiswa (hanya untuk SPD)","operationId":"addPoin","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PoinRequest"}}},"required":true},"responses":{"200":{"description":"Poin berhasil ditambahkan","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PoinResponse"}}}},"403":{"description":"Tidak memiliki akses"},"401":{"description":"Tidak terautentikasi"},"400":{"description":"Data request tidak valid atau mahasiswa tidak ditemukan","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageResponse"}}}}},"security":[{"bearerAuth":[]}]}},"/kategori":{"get":{"tags":["Kategori Pelanggaran"],"summary":"Mendapatkan semua kategori pelanggaran","operationId":"getAllKategori","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/KategoriResponse"}}}}}}},"post":{"tags":["Kategori Pelanggaran"],"summary":"Membuat kategori pelanggaran baru","operationId":"createKategori","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/KategoriRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"object"}}}}}}},"/auth/signup":{"post":{"tags":["auth-controller"],"summary":"Register user baru","description":"Endpoint untuk mendaftarkan user baru","operationId":"registerUser","requestBody":{"description":"Data registrasi user baru","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SignupRequest"}}},"required":true},"responses":{"200":{"description":"Registrasi berhasil","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SignupResponse"}}}},"400":{"description":"Data registrasi tidak valid","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageResponse"}}}}}}},"/auth/signin":{"post":{"tags":["auth-controller"],"summary":"Login user","description":"Endpoint untuk melakukan login user dan mendapatkan JWT token","operationId":"authenticateUser","requestBody":{"description":"Kredensial login user","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SigninRequest"}}},"required":true},"responses":{"401":{"description":"Kredensial tidak valid","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageResponse"}}}},"200":{"description":"Login berhasil","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SigninResponse"}}}}}}},"/users/profile":{"get":{"tags":["User Management"],"summary":"Mendapatkan profil user","description":"Endpoint untuk mendapatkan profil user yang sedang login","operationId":"myProfile","responses":{"200":{"description":"Profil berhasil diambil","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProfileResponse"}}}}},"security":[{"bearerAuth":[]}]},"patch":{"tags":["User Management"],"summary":"Update profil user","description":"Endpoint untuk mengupdate profil user yang sedang login","operationId":"updateProfile","requestBody":{"description":"Data profil yang akan diupdate","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProfileRequest"}}},"required":true},"responses":{"200":{"description":"Profil berhasil diupdate","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProfileResponse"}}}}},"security":[{"bearerAuth":[]}]}},"/users/password":{"patch":{"tags":["User Management"],"summary":"Mengubah password","description":"Endpoint untuk mengubah password user yang sedang login","operationId":"changePassword","requestBody":{"description":"Password baru","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PasswordRequest"}}},"required":true},"responses":{"200":{"description":"Password berhasil diubah","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageResponse"}}}}},"security":[{"bearerAuth":[]}]}},"/users/":{"get":{"tags":["User Management"],"summary":"Mendapatkan semua user","description":"Endpoint untuk mendapatkan daftar semua user (hanya untuk SPD)","operationId":"getAllUsers","responses":{"200":{"description":"Daftar user berhasil diambil","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/User"}}}}},"403":{"description":"Tidak memiliki akses","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageResponse"}}}}},"security":[{"bearerAuth":[]}]}},"/poins/{nim}":{"get":{"tags":["Poin"],"summary":"Mendapatkan poin berdasarkan NIM","description":"Endpoint untuk mendapatkan detail poin mahasiswa berdasarkan NIM (hanya untuk SPD)","operationId":"getPoinByNim","parameters":[{"name":"nim","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Data poin berhasil diambil","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PoinSummaryResponse"}}}},"403":{"description":"Tidak memiliki akses"},"401":{"description":"Tidak terautentikasi"},"400":{"description":"NIM tidak ditemukan","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageResponse"}}}}},"security":[{"bearerAuth":[]}]}},"/poins/kategori/{namaKategori}":{"get":{"tags":["Poin"],"summary":"Mendapatkan poin berdasarkan kategori","description":"Endpoint untuk mendapatkan daftar poin berdasarkan nama kategori (untuk SPD)","operationId":"getPoinsByKategori","parameters":[{"name":"namaKategori","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"400":{"description":"Kategori tidak ditemukan","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageResponse"}}}},"403":{"description":"Tidak memiliki akses"},"401":{"description":"Tidak terautentikasi"},"200":{"description":"Daftar poin berhasil diambil","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PoinResponse"}}}}},"security":[{"bearerAuth":[]}]}},"/kategori/{id}/poin":{"get":{"tags":["Kategori Pelanggaran"],"summary":"Mendapatkan poin-poin dalam suatu kategori","operationId":"getPoinsByKategori_1","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"object"}}}}}}},"/users/{id}":{"delete":{"tags":["User Management"],"summary":"Menghapus user","description":"Endpoint untuk menghapus user berdasarkan ID (hanya untuk SPD)","operationId":"deleteUser","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"User berhasil dihapus","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageResponse"}}}},"404":{"description":"User tidak ditemukan","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageResponse"}}}}},"security":[{"bearerAuth":[]}]}},"/poins/{id}":{"delete":{"tags":["Poin"],"summary":"Menghapus poin","description":"Endpoint untuk menghapus data poin berdasarkan ID (hanya untuk SPD)","operationId":"deletePoin","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"400":{"description":"ID poin tidak ditemukan","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageResponse"}}}},"403":{"description":"Tidak memiliki akses"},"200":{"description":"Poin berhasil dihapus","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageResponse"}}}},"401":{"description":"Tidak terautentikasi"}},"security":[{"bearerAuth":[]}]}}},"components":{"schemas":{"KategoriRequest":{"required":["deskripsi","nama","poinMaksimal","poinMinimal"],"type":"object","properties":{"nama":{"type":"string","description":"Nama kategori pelanggaran","example":"Pelanggaran Ringan"},"deskripsi":{"type":"string","description":"Deskripsi kategori pelanggaran","example":"Pelanggaran dengan tingkat ringan"},"poinMinimal":{"minimum":1,"type":"integer","description":"Poin minimal untuk kategori ini","format":"int32","example":1},"poinMaksimal":{"minimum":1,"type":"integer","description":"Poin maksimal untuk kategori ini","format":"int32","example":5}},"description":"Request model untuk kategori pelanggaran"},"PoinRequest":{"required":["jumlahPoin","namaPelanggaran","nim","tanggal"],"type":"object","properties":{"namaPelanggaran":{"type":"string","description":"Nama pelanggaran yang dilakukan","example":"Rambut Lebih dari 3cm"},"jumlahPoin":{"minimum":1,"type":"integer","description":"Jumlah poin pelanggaran","format":"int32","example":2},"tanggal":{"pattern":"\\d{4}-\\d{2}-\\d{2}","type":"string","description":"Tanggal pelanggaran dalam format yyyy-MM-dd","example":"2023-10-25"},"nim":{"type":"string","description":"NIM mahasiswa","example":"222212896"}},"description":"Request model untuk menambah atau mengupdate poin"},"PoinResponse":{"type":"object","properties":{"id":{"type":"integer","description":"ID poin","format":"int64","example":1},"namaPelanggaran":{"type":"string","description":"Nama pelanggaran","example":"Rambut Lebih dari 3cm"},"jumlahPoin":{"type":"integer","description":"Jumlah poin pelanggaran","format":"int32","example":2},"tanggal":{"type":"string","description":"Tanggal pelanggaran","format":"date","example":"2023-10-25"},"nim":{"type":"string","description":"NIM mahasiswa","example":"222212896"},"nama":{"type":"string","description":"Nama mahasiswa","example":"Mahasiswa"},"kelas":{"type":"string","description":"Kelas mahasiswa","example":"3SI2"},"kategoriId":{"type":"integer","description":"Kategori ID","format":"int64","example":2},"kategoriNama":{"type":"string","description":"Nama Kategori","example":"Ringan"}},"description":"Response model untuk data poin"},"MessageResponse":{"type":"object","properties":{"message":{"type":"string","description":"Pesan response","example":"Email sudah digunakan!"}},"description":"Response model untuk pesan"},"SignupRequest":{"required":["email","kelas","nama","nim","password"],"type":"object","properties":{"nama":{"type":"string","description":"Nama lengkap user","example":"Mahasiswa"},"email":{"type":"string","description":"Email user","example":"user@example.com"},"nim":{"type":"string","description":"NIM user","example":"222212896"},"kelas":{"type":"string","description":"Kelas user","example":"3SI2"},"password":{"type":"string","description":"Password user","example":"password123"},"role":{"type":"string","description":"Role user (isi spd atau kosongkan untuk mahasiswa)","example":"spd"}},"description":"Request model untuk registrasi"},"SignupResponse":{"type":"object","properties":{"nama":{"type":"string","description":"Nama user","example":"Mahasiswa"},"nim":{"type":"string","description":"NIM user","example":"222212896"},"kelas":{"type":"string","description":"Kelas user","example":"3SI2"},"email":{"type":"string","description":"Email user","example":"user@example.com"},"role":{"type":"string","description":"Role user","example":"ROLE_SPD"}},"description":"Response model untuk registrasi berhasil"},"SigninRequest":{"required":["email","password"],"type":"object","properties":{"email":{"type":"string","description":"Email user","example":"user@example.com"},"password":{"type":"string","description":"Password user","example":"password123"}},"description":"Request model untuk login"},"SigninResponse":{"type":"object","properties":{"token":{"type":"string","description":"JWT token","example":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."},"nama":{"type":"string","description":"Nama user","example":"Mahasiswa"},"nim":{"type":"string","description":"NIM user","example":"222212896"},"kelas":{"type":"string","description":"Kelas user","example":"3SI2"},"email":{"type":"string","description":"Email user","example":"user@example.com"}},"description":"Response model untuk login berhasil"},"ProfileRequest":{"required":["kelas","nama","nim"],"type":"object","properties":{"nama":{"type":"string","description":"Nama lengkap user","example":"Mahasiswa"},"nim":{"type":"string","description":"NIM user","example":"222212896"},"kelas":{"type":"string","description":"Kelas user","example":"3SI2"}},"description":"Request model untuk update profil"},"ProfileResponse":{"type":"object","properties":{"nama":{"type":"string","description":"Nama lengkap user","example":"Mahasiswa"},"nim":{"type":"string","description":"NIM user","example":"222212896"},"kelas":{"type":"string","description":"Kelas user","example":"3SI2"},"email":{"type":"string","description":"Email user","example":"user@example.com"}},"description":"Response model untuk profil"},"PasswordRequest":{"required":["password"],"type":"object","properties":{"password":{"type":"string","description":"Password baru","example":"newpassword123"}},"description":"Request model untuk mengubah password"},"User":{"required":["email","kelas","nama","nim","password"],"type":"object","properties":{"id":{"type":"integer","format":"int64"},"nama":{"type":"string"},"nim":{"type":"string"},"kelas":{"type":"string"},"email":{"type":"string"},"password":{"type":"string"},"roles":{"uniqueItems":true,"type":"array","items":{"$ref":"#/components/schemas/UserRole"}}}},"UserRole":{"type":"object","properties":{"id":{"type":"integer","format":"int32"},"name":{"type":"string","enum":["ROLE_MAHASISWA","ROLE_SPD"]}}},"PoinSummaryResponse":{"type":"object","properties":{"nama":{"type":"string","description":"Nama mahasiswa","example":"Mahasiswa"},"kelas":{"type":"string","description":"Kelas mahasiswa","example":"3SI2"},"totalPoin":{"type":"integer","description":"Total poin pelanggaran","format":"int32","example":5},"poinList":{"type":"array","description":"Daftar detail poin pelanggaran","items":{"$ref":"#/components/schemas/PoinResponse"}}},"description":"Response model untuk ringkasan poin mahasiswa"},"KategoriResponse":{"type":"object","properties":{"id":{"type":"integer","description":"ID kategori","format":"int64","example":1},"nama":{"type":"string","description":"Nama kategori","example":"Pelanggaran Ringan"},"deskripsi":{"type":"string","description":"Deskripsi kategori","example":"Pelanggaran dengan tingkat ringan"},"poinMinimal":{"type":"integer","description":"Poin minimal","format":"int32","example":1},"poinMaksimal":{"type":"integer","description":"Poin maksimal","format":"int32","example":5}},"description":"Response model untuk kategori pelanggaran"}},"securitySchemes":{"bearerAuth":{"type":"http","description":"Masukkan JWT token dengan format: Bearer <token>","scheme":"bearer","bearerFormat":"JWT"}}}}